1. cron规则

   **格式：** 表达式中各时间元素使用空格进行分割，表达式有至少6个（也可能7个）

   ```shell
   秒 分钟 小时 日期 月份 星期  年份（可选属性）
   ```

   

   **取值范围**

   ```shell
   # cron表达式中各时间元素使用空格进行分割，表达式有至少6个（也可能7个），如下
   秒钟：0~59
   分钟：0~59
   小时：0~23
   日期：1~31
   月份：1~12
   星期：0~7，Linux和Spring的允许值为0-7，0和7为周日,1-6分别是周一到周六
   年份：可选列，写对应年份信息，如2020，值范围1970–2099
   ```

   

   其中每个元素可以是一个值（如6），一个连续区间（9-12），一个间隔时间（8-18/4)）(/表示每隔4小时)，一个列表（1,3,5），通配符 * 。由于 `月份中的日期` 和 `星期中的日期` 这两个元素互斥的,必须要对其中一个设置为 符号 `?`

   

   **符号的意义**

   ```shell
   # 表示从2018年到2020年，每个星期天、星期六，每隔12个小时执行一次的0分执行
   # 从左到右，分别是 分钟、时、天、月份、星期、年份
   0 */12 * * 0,6 2018-2020
   
   *	  代表所有可能的值，即不限，如上，月和天都是*，表示每个月的每一天都是执行
   ，    定义枚举值，如上星期中，0,6 表示一个星期中只有星期六和星期天会执行
   -     定义范围，如上年份中，表示2018年到2020年才会执行，其他年份不执行
   /     定义频率，如上小时中，一天有24小时，表示间隔几个小时执行一次；若要执行哪些时间执行可以使用逗号，即枚举值方式实现
   ```

   

2. 示例

   ```shell
   0 0 10,14,16 * * ? 每天上午10点，下午2点，4点
   
   0 0/30 9-17 * * ?  朝九晚五工作时间内每半小时
   
   0 0 12 ? * WED 表示每个星期三中午12点 
   
   "0 0 12 * * ?" 每天中午12点触发 
   
   "0 15 10 ? * *" 每天上午10:15触发 
   
   "0 15 10 * * ?" 每天上午10:15触发 
   
   "0 15 10 * * ? *" 每天上午10:15触发 
   
   "0 15 10 * * ? 2005" 2005年的每天上午10:15触发 
   
   "0 * 14 * * ?" 在每天下午2点到下午2:59期间的每1分钟触发 
   
   "0 0/5 14 * * ?" 在每天下午2点到下午2:55期间的每5分钟触发 
   
   "0 0/5 14,18 * * ?" 在每天下午2点到2:55期间和下午6点到6:55期间的每5分钟触发 
   
   "0 0-5 14 * * ?" 在每天下午2点到下午2:05期间的每1分钟触发 
   
   "0 10,44 14 ? 3 WED" 每年三月的星期三的下午2:10和2:44触发 
   
   "0 15 10 ? * MON-FRI" 周一至周五的上午10:15触发 
   
   "0 15 10 15 * ?" 每月15日上午10:15触发 
   
   "0 15 10 L * ?" 每月最后一日的上午10:15触发 
   
   "0 15 10 ? * 6L" 每月的最后一个星期五上午10:15触发 
   
   "0 15 10 ? * 6L 2002-2005" 2002年至2005年的每月的最后一个星期五上午10:15触发 
   
   "0 15 10 ? * 6#3" 每月的第三个星期五上午10:15触发 
   ```

   

3. 有些子表达式能包含一些范围或列表

   `*` 字符代表所有可能的值，因此，`*` 在子表达式（月）里表示每个月的含义，`*`  在子表达式（天（星期））表示星期的每一天

   

4. `/` 字符用来指定数值的增量

   例如：在子表达式（分钟）里的 `0/15` 表示从第0分钟开始，每15分钟

     在子表达式（分钟）里的 `3/20` 表示从第3分钟开始，每20分钟（它和 `3，23，43`）的含义一样

   

5. `？` 字符仅被用于天（月）和天（星期）两个子表达式，表示不指定值

   当2个子表达式其中之一被指定了值以后，为了避免冲突，需要将另一个子表达式的值设为符号 `？`

   

6. `L` 字符仅被用于天（月）和天（星期）两个子表达式，它是单词 `last` 的缩写，但是它在两个子表达式里的含义是不同的。

   1. 在天（月）子表达式中，“L”表示一个月的最后一天
   2. 在天（星期）自表达式中，“L”表示一个星期的最后一天，也就是SAT
   3. 如果在“L”前有具体的内容，它就具有其他的含义了
   4. 例如：“6L”表示这个月的倒数第６天，“ＦＲＩＬ”表示这个月的最一个星期五
   5. 注意：在使用“L”参数时，不要指定列表或范围，因为这会导致问题

 

示例追加

巩固示例1

```shell
0 6 * * *		每天早上6点执行
*/1 * * * *		每分钟执行
0 */2 * * *		每两个小时执行
0 0 * * * 		每天零点执行
0 0 1 * *  		每月1号零点执
3,15 8-11 * * * 每天上午8-11点的第3分钟和第15分钟执行
```



巩固示例2

```
10 1 * * 6,0			每周六、周日的1点10分执行
*/30 18-23 * * *		每天18-23点，每隔30分钟执行一次
0 */12 * * 0,6 2018-2020  		2018-2020 年之间，每周六、周日每隔12小时执行一次
```



**java Cron 表达式 和 linux cron 表达式语法大体相似，有以下不同点**

- java Cron 表达式精确到秒，linux 的 cron 表达式 精确到分
- java Cron 表达式在日期类可以使用 L 表示最后一天，W表示最近工作日
- java Cron 表达式在星期列中可以使用L表示最后一周，# 表示第几周



**语法示例：**

```shell
0 0 0 * * * 	每天凌晨0点执行，从右到左理解，即每个星期，每个月，每天 0时	0分 0秒 执行

0 0 16 * * 5	每周五下午4点执行，从右到左理解，即星期五，每月，每天 16时	0分 0秒 执行

0 30 9 11 11 *	每年光棍节上午9点半执行，从右到左理解，即每星期，11月，11号 9时	30分 0秒 执行

0 15 10 L * *	每月最后一天10点15分执行，从右到左理解，即每星期，每月，最后一天 10时	15分 0秒 执行

0 0 8 * 5 0#2	每年母亲节上午八点执行，每年5月第二个星期就是母亲节，0#2,0表示星期天，#2表示第二个星期，组合起来就是第二个星期天 执行

0 0 12 15W * *	每个月离15号最近的工作日12点执行，从右到左理解，即每星期，每月，离15最近的工作日 12时	0分 0秒 执行，若15号就是工作日，那么就是15号执行，若15号是周六，那么最接近的工作日就是14号，若15号是周日，那么最接近的工作日就是16号
```

